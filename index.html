<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <div id="buttons">
        <button id="rock" class="choice">Rock</button>
        <button id="paper" class="choice">Paper</button>
        <button id="scissors" class="choice">Scissors</button>        
    </div>
    <div id="result">Starting new game</div>
    <div id="gameResult"></div>
    <div id="scores">
        Player: <span id="player">0</span> Computer: <span id="computer">0</span>
    </div>
    <button id="reset">Reset</button>

    <script>

        // GENERATES COMPUTER'S CHOICE RAMDOMLY
        function computerPlay(){
            const random = Math.floor(Math.random() * Math.floor(3));
            switch (random){
                case 0:
                    return 'rock';
                    break;
                case 1:
                    return 'paper';
                    break;
                case 2:
                    return 'scissors';
                    break;
                default:
                    console.log("COMPUTERPLAY ERROR");
            }
        }

        // LOGIC FOR SINGLE ROUND OF PLAY. BASIC EXCLUSION OF INCORRECT PLAYER INPUTS. CALLS FUNCTION TO UPDATE GAME. I'M SURE THERE IS A CLEANER WAY TO IMPLEMENT THIS THAN IF-ELSE LOGIC. 
        function playRound(e) {
            const gameResult = document.querySelector('#gameResult')
            if (gameResult.textContent !== "") return; // STOPS FURTHER PLAY IF GAME COMPLETE
            const playerSelection = this.id;
            const computerSelection = computerPlay();
            let result = document.querySelector('#result');


            if (playerSelection !== 'rock' && playerSelection !== 'paper' && playerSelection !== 'scissors') {
                result.textContent = "Player is cheating!";
            } else if (playerSelection === computerSelection) {
                result.textContent = `Draw! ${playerSelection} ties ${computerSelection}`;
            } else if ((playerSelection === 'rock' && computerSelection === 'scissors') || 
                       (playerSelection === 'paper' && computerSelection === 'rock') || 
                       (playerSelection === 'scissors' && computerSelection === 'paper')) {
                result.textContent = `You win! ${playerSelection} beats ${computerSelection}`;
                
            } else {
                result.textContent = `You lose! ${computerSelection} beats ${playerSelection}`;
            }
            updateGame();
        }

        // UPDATES PAGE WITH MATCH INFORMATION AND SCORE. PRINTS WIN STATEMENT.
        function updateGame() {
            const result = document.querySelector('#result');
            const gameResult = document.querySelector('#gameResult');
            const player = document.querySelector('#player');
            const computer = document.querySelector('#computer');
            let playerScore = Number(player.textContent);
            let computerScore = Number(computer.textContent);
            
            if (result.textContent.includes('win')) {
                playerScore++;
            } else if (result.textContent.includes('lose')) {
                computerScore++;
            }
        
            if (playerScore === 5 || computerScore === 5) {
                gameResult.textContent = `${playerScore === 5 ? "Player" : "Computer"} wins game!`
            }

            player.textContent = playerScore;
            computer.textContent = computerScore;
        }

        // RESETS GAME STATE TO BEGINNING
        function resetGame() {
            const result = document.querySelector('#result');
            const gameResult = document.querySelector('#gameResult');
            const player = document.querySelector('#player');
            const computer = document.querySelector('#computer');

            result.textContent = "Starting new game";
            player.textContent = "0";
            computer.textContent = "0";
            gameResult.textContent = "";
        }

        const choices = document.querySelectorAll('.choice');
        choices.forEach(choice => {
            choice.addEventListener('click', playRound);
        })

        const reset = document.querySelector('#reset');
        reset.addEventListener('click', resetGame);

    </script>
</body>
</html>